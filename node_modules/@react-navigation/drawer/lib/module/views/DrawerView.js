import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _defineProperty from"@babel/runtime/helpers/defineProperty";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _extends from"@babel/runtime/helpers/extends";var _jsxFileName="/Users/satya/Workspace/Projects/navigation-ex/packages/drawer/src/views/DrawerView.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import{View,Dimensions,StyleSheet,I18nManager,Platform,BackHandler}from'react-native';import{ScreenContainer}from'react-native-screens';import{GestureHandlerRootView}from'react-native-gesture-handler';import{DrawerActions}from'@react-navigation/routers';import{useTheme}from'@react-navigation/native';import DrawerGestureContext from'../utils/DrawerGestureContext';import SafeAreaProviderCompat from'./SafeAreaProviderCompat';import ResourceSavingScene from'./ResourceSavingScene';import DrawerContent from'./DrawerContent';import Drawer from'./Drawer';import DrawerPositionContext from'../utils/DrawerPositionContext';var getDefaultDrawerWidth=function getDefaultDrawerWidth(_ref){var height=_ref.height,width=_ref.width;var smallerAxisSize=Math.min(height,width);var isLandscape=width>height;var isTablet=smallerAxisSize>=600;var appBarHeight=Platform.OS==='ios'?isLandscape?32:44:56;var maxWidth=isTablet?320:280;return Math.min(smallerAxisSize-appBarHeight,maxWidth);};var GestureHandlerWrapper=GestureHandlerRootView!=null?GestureHandlerRootView:View;export default function DrawerView(_ref2){var state=_ref2.state,navigation=_ref2.navigation,descriptors=_ref2.descriptors,_ref2$lazy=_ref2.lazy,lazy=_ref2$lazy===void 0?true:_ref2$lazy,_ref2$drawerContent=_ref2.drawerContent,drawerContent=_ref2$drawerContent===void 0?function(props){return React.createElement(DrawerContent,_extends({},props,{__source:{fileName:_jsxFileName,lineNumber:75}}));}:_ref2$drawerContent,_ref2$drawerPosition=_ref2.drawerPosition,drawerPosition=_ref2$drawerPosition===void 0?I18nManager.isRTL?'right':'left':_ref2$drawerPosition,_ref2$keyboardDismiss=_ref2.keyboardDismissMode,keyboardDismissMode=_ref2$keyboardDismiss===void 0?'on-drag':_ref2$keyboardDismiss,_ref2$overlayColor=_ref2.overlayColor,overlayColor=_ref2$overlayColor===void 0?'rgba(0, 0, 0, 0.5)':_ref2$overlayColor,_ref2$drawerType=_ref2.drawerType,drawerType=_ref2$drawerType===void 0?'front':_ref2$drawerType,_ref2$hideStatusBar=_ref2.hideStatusBar,hideStatusBar=_ref2$hideStatusBar===void 0?false:_ref2$hideStatusBar,_ref2$statusBarAnimat=_ref2.statusBarAnimation,statusBarAnimation=_ref2$statusBarAnimat===void 0?'slide':_ref2$statusBarAnimat,drawerContentOptions=_ref2.drawerContentOptions,drawerStyle=_ref2.drawerStyle,edgeWidth=_ref2.edgeWidth,gestureHandlerProps=_ref2.gestureHandlerProps,minSwipeDistance=_ref2.minSwipeDistance,sceneContainerStyle=_ref2.sceneContainerStyle;var _React$useState=React.useState([state.index]),_React$useState2=_slicedToArray(_React$useState,2),loaded=_React$useState2[0],setLoaded=_React$useState2[1];var _React$useState3=React.useState(function(){return getDefaultDrawerWidth(Dimensions.get('window'));}),_React$useState4=_slicedToArray(_React$useState3,2),drawerWidth=_React$useState4[0],setDrawerWidth=_React$useState4[1];var drawerGestureRef=React.useRef(null);var _useTheme=useTheme(),colors=_useTheme.colors;var isDrawerOpen=Boolean(state.history.find(function(it){return it.type==='drawer';}));var handleDrawerOpen=React.useCallback(function(){navigation.dispatch(_objectSpread({},DrawerActions.openDrawer(),{target:state.key}));},[navigation,state.key]);var handleDrawerClose=React.useCallback(function(){navigation.dispatch(_objectSpread({},DrawerActions.closeDrawer(),{target:state.key}));},[navigation,state.key]);React.useEffect(function(){if(isDrawerOpen){navigation.emit({type:'drawerOpen'});}else{navigation.emit({type:'drawerClose'});}},[isDrawerOpen,navigation]);React.useEffect(function(){var subscription;if(isDrawerOpen){subscription=BackHandler.addEventListener('hardwareBackPress',function(){handleDrawerClose();return true;});}return function(){var _subscription;return(_subscription=subscription)==null?void 0:_subscription.remove();};},[handleDrawerClose,isDrawerOpen,navigation,state.key]);React.useEffect(function(){var updateWidth=function updateWidth(_ref3){var window=_ref3.window;setDrawerWidth(getDefaultDrawerWidth(window));};Dimensions.addEventListener('change',updateWidth);return function(){return Dimensions.removeEventListener('change',updateWidth);};},[]);if(!loaded.includes(state.index)){setLoaded([].concat(_toConsumableArray(loaded),[state.index]));}var renderNavigationView=function renderNavigationView(_ref4){var progress=_ref4.progress;return React.createElement(DrawerPositionContext.Provider,{value:drawerPosition,__source:{fileName:_jsxFileName,lineNumber:156}},drawerContent(_objectSpread({},drawerContentOptions,{progress:progress,state:state,navigation:navigation,descriptors:descriptors})));};var renderContent=function renderContent(){return React.createElement(ScreenContainer,{style:styles.content,__source:{fileName:_jsxFileName,lineNumber:170}},state.routes.map(function(route,index){var descriptor=descriptors[route.key];var unmountOnBlur=descriptor.options.unmountOnBlur;var isFocused=state.index===index;if(unmountOnBlur&&!isFocused){return null;}if(lazy&&!loaded.includes(index)&&!isFocused){return null;}return React.createElement(ResourceSavingScene,{key:route.key,style:[StyleSheet.absoluteFill,{opacity:isFocused?1:0}],isVisible:isFocused,__source:{fileName:_jsxFileName,lineNumber:186}},descriptor.render());}));};var activeKey=state.routes[state.index].key;var gestureEnabled=descriptors[activeKey].options.gestureEnabled;return React.createElement(GestureHandlerWrapper,{style:styles.content,__source:{fileName:_jsxFileName,lineNumber:203}},React.createElement(SafeAreaProviderCompat,{__source:{fileName:_jsxFileName,lineNumber:204}},React.createElement(DrawerGestureContext.Provider,{value:drawerGestureRef,__source:{fileName:_jsxFileName,lineNumber:205}},React.createElement(Drawer,{open:isDrawerOpen,gestureEnabled:gestureEnabled,onOpen:handleDrawerOpen,onClose:handleDrawerClose,onGestureRef:function onGestureRef(ref){drawerGestureRef.current=ref;},gestureHandlerProps:gestureHandlerProps,drawerType:drawerType,drawerPosition:drawerPosition,sceneContainerStyle:[{backgroundColor:colors.background},sceneContainerStyle],drawerStyle:[{width:drawerWidth,backgroundColor:colors.card},drawerStyle],overlayStyle:{backgroundColor:overlayColor},swipeEdgeWidth:edgeWidth,swipeDistanceThreshold:minSwipeDistance,hideStatusBar:hideStatusBar,statusBarAnimation:statusBarAnimation,renderDrawerContent:renderNavigationView,renderSceneContent:renderContent,keyboardDismissMode:keyboardDismissMode,drawerPostion:drawerPosition,__source:{fileName:_jsxFileName,lineNumber:206}}))));}var styles=StyleSheet.create({content:{flex:1}});
//# sourceMappingURL=DrawerView.js.map